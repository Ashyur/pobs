
    <!DOCTYPE html>
    <html>
    <head>
        <title>POB Table Export</title>
        <style>
            table {
                border-collapse: collapse;
                width: 100%;
                margin-top: 20px;
            }
            th, td {
                border: 1px solid black;
                padding: 8px;
                text-align: left;
            }
            th {
                background-color: #f2f2f2;
                cursor: pointer;
                user-select: none;
                position: relative;
            }
            th:hover {
                background-color: #e6e6e6;
            }
            .sort-indicator {
                display: inline-block;
                margin-left: 5px;
                width: 0;
                height: 0;
                border-left: 5px solid transparent;
                border-right: 5px solid transparent;
            }
            .sort-asc .sort-indicator {
                border-bottom: 5px solid #333;
                border-top: none;
            }
            .sort-desc .sort-indicator {
                border-top: 5px solid #333;
                border-bottom: none;
            }
            input {
                width: 100%;
                padding: 6px;
                box-sizing: border-box;
                margin-bottom: 8px;
            }
        </style>
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                // Initialize sorting state
                let sortState = {
                    column: null,
                    direction: 'asc'
                };

                function compareValues(a, b, isAsc) {
                    // Check if values are numbers
                    const aNum = parseFloat(a);
                    const bNum = parseFloat(b);
                    
                    if (!isNaN(aNum) && !isNaN(bNum)) {
                        return isAsc ? aNum - bNum : bNum - aNum;
                    }
                    
                    // Fall back to string comparison
                    const aStr = String(a).toLowerCase();
                    const bStr = String(b).toLowerCase();
                    return isAsc ? aStr.localeCompare(bStr) : bStr.localeCompare(aStr);
                }

                function sortTable(columnIndex) {
                    const table = document.getElementById('pobTable');
                    const tbody = table.querySelector('tbody');
                    const rows = Array.from(tbody.getElementsByTagName('tr'));
                    const headers = table.querySelectorAll('tr:nth-child(2) th'); // Select headers from second row

                    // Update sort direction
                    if (sortState.column === columnIndex) {
                        sortState.direction = sortState.direction === 'asc' ? 'desc' : 'asc';
                    } else {
                        sortState.column = columnIndex;
                        sortState.direction = 'asc';
                    }

                    // Remove all sort classes
                    headers.forEach(header => {
                        header.classList.remove('sort-asc', 'sort-desc');
                    });

                    // Add sort class to current header
                    const currentHeader = headers[columnIndex];
                    currentHeader.classList.add(
                        sortState.direction === 'asc' ? 'sort-asc' : 'sort-desc'
                    );

                    // Sort rows
                    rows.sort((rowA, rowB) => {
                        const cellA = rowA.cells[columnIndex].textContent.trim();
                        const cellB = rowB.cells[columnIndex].textContent.trim();
                        return compareValues(cellA, cellB, sortState.direction === 'asc');
                    });

                    // Reattach sorted rows
                    rows.forEach(row => tbody.appendChild(row));
                }

                function filterTable() {
                    const table = document.getElementById('pobTable');
                    const rows = Array.from(table.getElementsByTagName('tr')).slice(2); // Skip both header rows
                    const filters = Array.from(document.querySelectorAll('input[type="text"]'))
                        .map(input => input.value.toLowerCase());

                    rows.forEach(row => {
                        const cells = row.getElementsByTagName('td');
                        let shouldShow = true;

                        for (let j = 0; j < filters.length; j++) {
                            if (filters[j]) {
                                const cellText = cells[j].textContent.toLowerCase();
                                if (!cellText.includes(filters[j])) {
                                    shouldShow = false;
                                    break;
                                }
                            }
                        }

                        row.style.display = shouldShow ? '' : 'none';
                    });
                }

                // Add click handlers to all sortable headers in the second row
                const headers = document.querySelectorAll('#pobTable tr:nth-child(2) th');
                headers.forEach((header, index) => {
                    header.addEventListener('click', () => sortTable(index));
                });

                // Add filter handlers
                const filters = document.querySelectorAll('input[type="text"]');
                filters.forEach(filter => {
                    filter.addEventListener('input', filterTable);
                });
            });
        </script>
    </head>
    <body>
        <h1>POB Table</h1>
        <table id="pobTable">
            <thead>
                <tr>
    <th><input type="text" placeholder="Filter user_id"></th><th><input type="text" placeholder="Filter pob_name"></th><th><input type="text" placeholder="Filter iff"></th><th><input type="text" placeholder="Filter location"></th><th><input type="text" placeholder="Filter buy_sell"></th><th><input type="text" placeholder="Filter item"></th><th><input type="text" placeholder="Filter amount"></th><th><input type="text" placeholder="Filter price"></th><th><input type="text" placeholder="Filter posted_on"></th><th><input type="text" placeholder="Filter order_id"></th><th><input type="text" placeholder="Filter completedamount"></th><th><input type="text" placeholder="Filter totalamount"></th><th><input type="text" placeholder="Filter escrow"></th></tr><tr><th>user_id<span class="sort-indicator"></span></th><th>pob_name<span class="sort-indicator"></span></th><th>iff<span class="sort-indicator"></span></th><th>location<span class="sort-indicator"></span></th><th>buy_sell<span class="sort-indicator"></span></th><th>item<span class="sort-indicator"></span></th><th>amount<span class="sort-indicator"></span></th><th>price<span class="sort-indicator"></span></th><th>posted_on<span class="sort-indicator"></span></th><th>order_id<span class="sort-indicator"></span></th><th>completedamount<span class="sort-indicator"></span></th><th>totalamount<span class="sort-indicator"></span></th><th>escrow<span class="sort-indicator"></span></th></tr></thead><tbody>
            </tbody>
        </table>
    </body>
    </html>
    