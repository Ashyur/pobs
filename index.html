
    <!DOCTYPE html>
    <html>
    <head>
        <title>Insurance & Orders Management</title>
        <style>
            body {
                font-family: Arial, sans-serif;
                margin: 20px;
            }
            
            .tab-container {
                margin-bottom: 20px;
            }
            
            .tab-buttons {
                display: flex;
                border-bottom: 2px solid #ddd;
                margin-bottom: 20px;
            }
            
            .tab-button {
                padding: 12px 24px;
                border: none;
                background-color: #f8f9fa;
                cursor: pointer;
                font-size: 16px;
                border-top: 2px solid transparent;
                border-left: 1px solid #ddd;
                border-right: 1px solid #ddd;
                transition: all 0.3s ease;
            }
            
            .tab-button:first-child {
                border-left: 2px solid #ddd;
            }
            
            .tab-button:last-child {
                border-right: 2px solid #ddd;
            }
            
            .tab-button.active {
                background-color: #007bff;
                color: white;
                border-top-color: #007bff;
            }
            
            .tab-button:hover:not(.active) {
                background-color: #e9ecef;
            }
            
            .tab-content {
                display: none;
            }
            
            .tab-content.active {
                display: block;
            }
            
            table {
                border-collapse: collapse;
                width: 100%;
                margin-top: 20px;
            }
            
            th, td {
                border: 1px solid #ddd;
                padding: 8px;
                text-align: left;
            }
            
            th {
                background-color: #f2f2f2;
                cursor: pointer;
                user-select: none;
                position: relative;
            }
            
            th:hover {
                background-color: #e6e6e6;
            }
            
            .sort-indicator {
                display: inline-block;
                margin-left: 5px;
                width: 0;
                height: 0;
                border-left: 5px solid transparent;
                border-right: 5px solid transparent;
            }
            
            .sort-asc .sort-indicator {
                border-bottom: 5px solid #333;
                border-top: none;
            }
            
            .sort-desc .sort-indicator {
                border-top: 5px solid #333;
                border-bottom: none;
            }
            
            input {
                width: 100%;
                padding: 6px;
                box-sizing: border-box;
                margin-bottom: 8px;
            }
            
            .tab-header {
                margin-bottom: 15px;
            }
            
            .tab-header h2 {
                margin: 0;
                color: #333;
            }
            
            .active-insurance-tab .tab-header h2 {
                color: #28a745;
            }
            
            .no-data {
                text-align: center;
                color: #666;
                font-style: italic;
                padding: 20px;
            }
            
            .debug-info {
                background-color: #f8f9fa;
                border: 1px solid #dee2e6;
                padding: 10px;
                margin-bottom: 20px;
                border-radius: 4px;
                font-size: 14px;
                color: #6c757d;
            }
        </style>
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                const tabButtons = document.querySelectorAll('.tab-button');
                const tabContents = document.querySelectorAll('.tab-content');
                
                function showTab(tabName) {
                    tabContents.forEach(content => {
                        content.classList.remove('active');
                    });
                    
                    tabButtons.forEach(button => {
                        button.classList.remove('active');
                    });
                    
                    document.getElementById(tabName).classList.add('active');
                    
                    document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
                }
                
                tabButtons.forEach(button => {
                    button.addEventListener('click', () => {
                        const tabName = button.getAttribute('data-tab');
                        showTab(tabName);
                    });
                });
                
                showTab('active-insurance-tab');
                
                let sortStates = {
                    'active-insurance-table': { column: null, direction: 'asc' },
                    'insurance-table': { column: null, direction: 'asc' },
                    'orders-table': { column: null, direction: 'asc' }
                };

                function compareValues(a, b, isAsc) {
                    const aNum = parseFloat(a);
                    const bNum = parseFloat(b);
                    
                    if (!isNaN(aNum) && !isNaN(bNum)) {
                        return isAsc ? aNum - bNum : bNum - aNum;
                    }
                    
                    const aStr = String(a).toLowerCase();
                    const bStr = String(b).toLowerCase();
                    return isAsc ? aStr.localeCompare(bStr) : bStr.localeCompare(aStr);
                }

                function sortTable(tableId, columnIndex) {
                    const table = document.getElementById(tableId);
                    const tbody = table.querySelector('tbody');
                    const rows = Array.from(tbody.getElementsByTagName('tr'));
                    const headers = table.querySelectorAll('tr:nth-child(2) th');
                    
                    let sortState = sortStates[tableId];

                    if (sortState.column === columnIndex) {
                        sortState.direction = sortState.direction === 'asc' ? 'desc' : 'asc';
                    } else {
                        sortState.column = columnIndex;
                        sortState.direction = 'asc';
                    }

                    headers.forEach(header => {
                        header.classList.remove('sort-asc', 'sort-desc');
                    });

                    const currentHeader = headers[columnIndex];
                    currentHeader.classList.add(
                        sortState.direction === 'asc' ? 'sort-asc' : 'sort-desc'
                    );

                    rows.sort((rowA, rowB) => {
                        const cellA = rowA.cells[columnIndex].textContent.trim();
                        const cellB = rowB.cells[columnIndex].textContent.trim();
                        return compareValues(cellA, cellB, sortState.direction === 'asc');
                    });

                    rows.forEach(row => tbody.appendChild(row));
                }

                function filterTable(tableId) {
                    const table = document.getElementById(tableId);
                    const rows = Array.from(table.getElementsByTagName('tr')).slice(2);
                    const filters = Array.from(table.querySelectorAll('input[type="text"]'))
                        .map(input => input.value.toLowerCase());

                    rows.forEach(row => {
                        const cells = row.getElementsByTagName('td');
                        let shouldShow = true;

                        for (let j = 0; j < filters.length; j++) {
                            if (filters[j]) {
                                const cellText = cells[j].textContent.toLowerCase();
                                if (!cellText.includes(filters[j])) {
                                    shouldShow = false;
                                    break;
                                }
                            }
                        }

                        row.style.display = shouldShow ? '' : 'none';
                    });
                }

                ['active-insurance-table', 'insurance-table', 'orders-table'].forEach(tableId => {
                    const table = document.getElementById(tableId);
                    if (table) {
                        const headers = table.querySelectorAll('tr:nth-child(2) th');
                        headers.forEach((header, index) => {
                            header.addEventListener('click', () => sortTable(tableId, index));
                        });

                        const filters = table.querySelectorAll('input[type="text"]');
                        filters.forEach(filter => {
                            filter.addEventListener('input', () => filterTable(tableId));
                        });
                    }
                });
            });
        </script>
    </head>
    <body>
        <h1>Insurance & Orders Management System</h1>
        
        <div class="tab-container">
            <div class="tab-buttons">
                <button class="tab-button active" data-tab="active-insurance-tab">Active Insurance</button>
                <button class="tab-button" data-tab="insurance-tab">Forum Purchases</button>
                <button class="tab-button" data-tab="orders-tab">Orders</button>
            </div>
            
            <div id="active-insurance-tab" class="tab-content active active-insurance-tab">
                <div class="tab-header">
                    <h2>Active Insurance Policies</h2>
                </div>
                <div class="debug-info">
                    Active Insurance Records Found: 0
                </div>
    
                <div class="no-data">
                    <p>No active insurance policies found.</p>
                    <p>Records are considered active if they have systems_remaining > 0 AND no expiration_date.</p>
                </div>
        
            </div>
            
            <div id="insurance-tab" class="tab-content">
                <div class="tab-header">
                    <h2>Forum Purchases</h2>
                </div>
                <div class="debug-info">
                    Total Insurance Records: 2
                </div>
                <table id="insurance-table">
                    <thead>
                        <tr>
    <th><input type="text" placeholder="Filter id"></th><th><input type="text" placeholder="Filter shipname"></th><th><input type="text" placeholder="Filter value_insured"></th><th><input type="text" placeholder="Filter system_insured"></th><th><input type="text" placeholder="Filter money_paid"></th><th><input type="text" placeholder="Filter proof_of_payment"></th><th><input type="text" placeholder="Filter post_id"></th></tr><tr><th>id<span class="sort-indicator"></span></th><th>shipname<span class="sort-indicator"></span></th><th>value_insured<span class="sort-indicator"></span></th><th>system_insured<span class="sort-indicator"></span></th><th>money_paid<span class="sort-indicator"></span></th><th>proof_of_payment<span class="sort-indicator"></span></th><th>post_id<span class="sort-indicator"></span></th></tr></thead><tbody><tr><td>3</td><td>ICE|Debt.Collector</td><td>400000</td><td>10</td><td>100000</td><td>link placeholder</td><td>2350354</td></tr><tr><td>4</td><td>ICE|Debt.Collector</td><td>400000</td><td>10</td><td>100000</td><td>link placeholder</td><td>2371182</td></tr>
                    </tbody>
                </table>
            </div>
            
            <div id="orders-tab" class="tab-content">
                <div class="tab-header">
                    <h2>Orders</h2>
                </div>
                <div class="debug-info">
                    Filtered Orders Records: 0 (API orders excluded)
                </div>
                <table id="orders-table">
                    <thead>
                        <tr>
    <th><input type="text" placeholder="Filter user_id"></th><th><input type="text" placeholder="Filter pob_name"></th><th><input type="text" placeholder="Filter iff"></th><th><input type="text" placeholder="Filter location"></th><th><input type="text" placeholder="Filter buy_sell"></th><th><input type="text" placeholder="Filter item"></th><th><input type="text" placeholder="Filter amount"></th><th><input type="text" placeholder="Filter price"></th><th><input type="text" placeholder="Filter posted_on"></th><th><input type="text" placeholder="Filter order_id"></th><th><input type="text" placeholder="Filter completedamount"></th><th><input type="text" placeholder="Filter totalamount"></th><th><input type="text" placeholder="Filter escrow"></th></tr><tr><th>user_id<span class="sort-indicator"></span></th><th>pob_name<span class="sort-indicator"></span></th><th>iff<span class="sort-indicator"></span></th><th>location<span class="sort-indicator"></span></th><th>buy_sell<span class="sort-indicator"></span></th><th>item<span class="sort-indicator"></span></th><th>amount<span class="sort-indicator"></span></th><th>price<span class="sort-indicator"></span></th><th>posted_on<span class="sort-indicator"></span></th><th>order_id<span class="sort-indicator"></span></th><th>completedamount<span class="sort-indicator"></span></th><th>totalamount<span class="sort-indicator"></span></th><th>escrow<span class="sort-indicator"></span></th></tr></thead><tbody>
                    </tbody>
                </table>
            </div>
        </div>
    </body>
    </html>
    